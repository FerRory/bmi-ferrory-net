<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BMI Tracker</title>
  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png>">
  <link rel="apple-touch-startup-image" href="/apple-touch-icon.png">
  <link rel="shortcut icon" href="/favicon.ico">
  <!-- iOS web app meta -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BMI Tracker">

  <link rel="mask-icon" href="/icons/favicon.svg" color="#5bbad5">
  <!-- Make page scale properly on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
<script>

function registerPerson()
{

  length = document.getElementById('length').value;
  sex = document.querySelector('input[name]:checked').value;
  if(length == "" || isNaN(length) || length <= 0) {
    alert("Please enter a valid length");
    return;
  
  }
  localStorage.setItem("person", [sex, length]);
  showHistory();
}
function registerWeight()
{
  weight = document.getElementById('weight').value;
  if(weight == "" || isNaN(weight) || weight <= 0) {
    alert("Please enter a valid weight");
    return;
  
  }
  day = new Date().getDay();
  localStorage.setItem("day"+day, weight);
  showHistory();
}
function registerWeight()
{
  weight = document.getElementById('weight').value;
  if(weight == "" || isNaN(weight) || weight <= 0) {
    alert("Please enter a valid weight");
    return;
  
  }
  person = localStorage.getItem("person").split(",");
  bmi = weight / ((person[1]/100) * (person[1]/100));
  day = new Date().toLocaleDateString();
  historyBMI = localStorage.getItem("history");
  if (historyBMI == null) {
    historyBMI = "";
  }
  historyBMI = "Day: " + day + ", weight: " + weight + " kg, BMI: " + bmi.toFixed(2) +"<br/>" + historyBMI;
  console.log(historyBMI);
  localStorage.setItem("history", historyBMI);
  

  showHistory();
} 
function showHistory() 
{
  localStorage.getItem("person");
  if(localStorage.getItem("person") == null) {
    document.getElementById('history').innerHTML = "<h2>Please enter your personal details first</h2>";
    return;
  
  }
  else
  {
    document.getElementById('registerPerson').style.display='none';
    person = localStorage.getItem("person").split(",")
    historyBMI = localStorage.getItem("history");
    if (historyBMI == null) {
      historyBMI = "";
    }
    console.log(historyBMI);
    document.getElementById('history').innerHTML = "<h2>History for a " + person[0] + " with a length of " + person[1] + " cm</h2>" + historyBMI;
  }
}
</script>
</head>
<body onLoad="showHistory()">
<header>
<h1>BMI Tracker</h1>
<img src="/apple-touch-icon.png" alt="Sleep Tracker Logo" width="100" height="100">
</header>
<form id="registerPerson">
  <label for="sex">Sex:</label><input type="radio"  name="sex" value="woman"/>Woman <input type="radio" name="sex" value="man"/>Man  </label>
  <label for="length">Length: <input type="text" name="lenght" id="length" value=""/></label>
  <button type="button" id="submit" value"save" onClick="javascript:registerPerson()">Save</button>
</form>
<form id="registerWeight">
  <label for="weight">Weight (kg): <input type="text" name="weight" id="weight" value=""/></label>
  <button type="button" id="submit" value"save" onClick="javascript:registerWeight()">Save</button>
</form>
<div id="history"></div>


<footer>
  &copy; 2025 Rory Schellekens. All rights reserved.
</footer>
</body>
</html>
